---
title: uni-pages 配置
description: 了解 uni-pages 插件的所有可用配置选项。
---

## 概述

`UniPages` 插件接受一个配置对象，用于自定义插件的行为。所有选项都是可选的，插件会使用合理的默认值。

```ts [vite.config.ts]
import uni from '@dcloudio/vite-plugin-uni'
import UniPages from 'uni-pages'
import { defineConfig } from 'vite'

export default defineConfig({
  plugins: [
    UniPages({
      // 在这里配置选项
    }),
    uni(),
  ],
})
```

## 配置选项

### root

- **类型**：`string`
- **默认值**：`vite.config.*` 所在目录

项目根目录路径。通常不需要手动设置，插件会自动检测。

```ts
UniPages({
  root: process.cwd(),
})
```

### src

- **类型**：`string`
- **默认值**：`pages.json` 所在目录（通常是 `src`）

应用源码目录，`pages.config.ts` 和 `pages.json` 都位于此目录下。

```ts
UniPages({
  src: 'src',
})
```

### pageDir

- **类型**：`string`
- **默认值**：`'pages'`

主包页面目录，相对于 `src` 目录的路径。

```ts
UniPages({
  pageDir: 'pages',  // src/pages
})
```

### subPackageDirs

- **类型**：`string[]`
- **默认值**：`[]`

分包页面目录列表，每个目录会作为一个独立的分包。

```ts
UniPages({
  subPackageDirs: [
    'pages-sub',      // src/pages-sub
    'pages-user',     // src/pages-user
  ],
})
```

### excludePages

- **类型**：`string[]`
- **默认值**：`[]`

排除的页面路径模式，支持 glob 语法。被排除的页面不会被扫描和添加到 `pages.json`。

```ts
UniPages({
  excludePages: [
    'pages/test/**',           // 排除 test 目录
    'pages/dev/*.vue',         // 排除 dev 目录下的 vue 文件
    'pages-sub/exclude/**',    // 排除分包中的目录
  ],
})
```

常见排除场景：

| 模式                  | 说明                 |
|-----------------------|----------------------|
| `pages/test/**`       | 排除测试页面         |
| `pages/components/**` | 排除组件目录         |
| `**/demo.vue`         | 排除所有 demo 页面   |
| `pages-sub/dev/**`    | 排除分包中的开发页面 |

### dts

- **类型**：`string | false`
- **默认值**：`'pages.d.ts'`

页面路径的 TypeScript 声明文件路径。设为 `false` 可禁用生成。

```ts
UniPages({
  dts: 'src/pages.d.ts',  // 自定义路径
  // 或
  dts: false,              // 禁用生成
})
```

::note
生成的类型声明文件 `src/pages.d.ts (自动生成)` 可以为页面路径导航提供智能提示
::

### debug

- **类型**：`boolean | 'info' | 'error' | 'debug' | 'warn'`
- **默认值**：`false`

启用调试日志输出，帮助排查问题。

```ts
UniPages({
  debug: true,      // 启用所有日志
  // 或
  debug: 'info',    // 只显示 info 级别日志
  debug: 'debug',   // 显示详细调试信息
  debug: 'warn',    // 只显示警告
  debug: 'error',   // 只显示错误
})
```

## 完整配置示例

```ts [vite.config.ts]
import uni from '@dcloudio/vite-plugin-uni'
import UniPages from 'uni-pages'
import { defineConfig } from 'vite'

export default defineConfig({
  plugins: [
    UniPages({
      // 分包配置
      subPackageDirs: ['pages-sub', 'pages-user'],
      
      // 排除测试和开发页面
      excludePages: [
        'pages/test/**',
        'pages/dev/**',
      ],
      
      // 类型声明
      dts: 'src/types/pages.d.ts',
      
      // 开发时启用调试
      debug: process.env.NODE_ENV === 'development',
    }),
    uni(),
  ],
})
```
