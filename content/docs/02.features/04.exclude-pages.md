---
title: 排除页面
description: 了解如何排除不需要被自动扫描的页面文件。
---

## 为什么需要排除页面？

在实际项目中，`pages` 目录下可能存在一些不应被当作路由页面的文件：

- **开发调试页面**：仅开发时使用的测试页面
- **组件目录**：存放在 pages 目录下的共享组件
- **示例页面**：文档或演示用途的页面
- **废弃页面**：暂时保留但不启用的旧页面

## 配置排除规则

在 `vite.config.ts` 中使用 `excludePages` 选项：

```ts [vite.config.ts]
import uni from '@dcloudio/vite-plugin-uni'
import UniPages from 'uni-pages'
import { defineConfig } from 'vite'

export default defineConfig({
  plugins: [
    UniPages({
      excludePages: [
        'pages/test/**',       // 排除 test 目录下所有页面
        'pages/dev/*.vue',     // 排除 dev 目录下的 vue 文件
      ],
    }),
    uni(),
  ],
})
```

::note
排除规则的路径是相对于 `src` 目录的，不需要包含 `src/` 前缀。
::

<!-- 
## Glob 语法

`excludePages` 支持 glob 语法匹配：

| 模式    | 说明                           | 示例                    |
|---------|--------------------------------|-------------------------|
| `*`     | 匹配任意字符（不含路径分隔符） | `pages/dev/*.vue`       |
| `**`    | 匹配任意层级目录               | `pages/test/**`         |
| `?`     | 匹配单个字符                   | `pages/page?.vue`       |
| `[abc]` | 匹配括号内任意字符             | `pages/[abc]/index.vue` |
| `{a,b}` | 匹配括号内任意模式             | `pages/{dev,test}/**`   |

## 常见排除场景

### 排除开发测试目录

```ts
UniPages({
  excludePages: [
    'pages/test/**',
    'pages/dev/**',
    'pages/__debug__/**',
  ],
})
```

### 排除组件目录

```ts
UniPages({
  excludePages: [
    'pages/components/**',
    'pages/**/components/**',
  ],
})
```

### 排除特定文件

```ts
UniPages({
  excludePages: [
    '**/demo.vue',
    '**/example.vue',
    '**/_*.vue',        // 排除下划线开头的文件
  ],
})
```

### 排除分包中的页面

```ts
UniPages({
  subPackageDirs: ['pages-sub'],
  excludePages: [
    'pages-sub/dev/**',
    'pages-sub/test/**',
  ],
})
```
-->

## 完整示例

配置：

```ts
UniPages({
  excludePages: [
    'pages/test/**',
    'pages/dev/**',
    'pages/components/**',
  ],
})
```

效果：

```
src/pages/
├── index/
│   └── index.vue          ✅ 会被扫描
├── about/
│   └── index.vue          ✅ 会被扫描
├── test/                   ❌ 被排除
│   ├── page1.vue
│   └── page2.vue
├── dev/                    ❌ 被排除
│   └── debug.vue
└── components/             ❌ 被排除
    └── shared-button.vue
```